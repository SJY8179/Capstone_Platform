### 1) 로그인 (교수 계정)
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "protest@prof.com",
  "password": "000000"
}

> {%
    // 액세스 토큰 저장
    client.global.set("accessToken", response.body.accessToken);

    // 날짜 변수: 오늘+3일, 어제 (yyyy-MM-dd)
    const toYMD = (d) => new Date(d).toISOString().substring(0,10);
    const now = Date.now();
    client.global.set("D_PLUS3", toYMD(now + 3*24*3600*1000));
    client.global.set("D_MINUS1", toYMD(now - 1*24*3600*1000));
%}

### 2) (선택) 내가 속한 프로젝트 목록 → 첫 번째 프로젝트 id 저장
GET http://localhost:8080/api/projects/my
Authorization: Bearer {{accessToken}}

> {%
    // projects/my 응답에서 첫 번째 프로젝트 id를 PROJECT_ID로 저장
    if (Array.isArray(response.body) && response.body.length) {
        client.global.set("PROJECT_ID", String(response.body[0].id));
    } else {
        // my가 비어있다면 1로 가정 (DB 예시와 동일)
        client.global.set("PROJECT_ID", "1");
    }
%}

### 3-1) 과제 생성: PENDING (마감 +3일)
POST http://localhost:8080/api/projects/{{PROJECT_ID}}/assignments
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "test-3days",
  "dueDateIso": "{{D_PLUS3}}",
  "status": "PENDING"
}

### 3-2) 과제 생성: ONGOING (마감 어제 → 임박/지남)
POST http://localhost:8080/api/projects/{{PROJECT_ID}}/assignments
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "ttest-overdue",
  "dueDateIso": "{{D_MINUS1}}",
  "status": "ONGOING"
}

### 4) 검토 목록 조회 (임박 기준 7일)
GET http://localhost:8080/api/professor/reviews?days=7&limit=50
Authorization: Bearer {{accessToken}}

> {%
    // 응답 목록에서 assignmentId/projectId만 뽑아 최대 10건을 BULK_ITEMS 변수로 저장
    const arr = Array.isArray(response.body) ? response.body : [];
    const pick = arr.slice(0, 10).map(it => ({ assignmentId: it.assignmentId, projectId: it.projectId }));
    client.global.set("BULK_ITEMS", JSON.stringify(pick));
    client.log('BULK_ITEMS=' + JSON.stringify(pick));
%}

### 5) 일괄 승인 (4단계에서 저장한 BULK_ITEMS 사용)
POST http://localhost:8080/api/professor/reviews/bulk
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "action": "APPROVE",
  "items": {{BULK_ITEMS}}
}

### 6) 재조회 → 목록이 줄거나 0이면 OK
GET http://localhost:8080/api/professor/reviews?days=7&limit=50
Authorization: Bearer {{accessToken}}
